update vertices set latitude =0, longitude =0;
update vertices set nome = (select iif(nome_laboratorio is not null, concat(nome_local, '/', nome_laboratorio), nome_local) from locais where id_local = vertices.id_local) 

INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (1,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (2,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (3,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (4,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (5,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (6,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (7,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (8,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (9,  4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (10, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (11, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (12, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (13, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (14, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (15, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (16, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (17, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (18, 4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (7,  4, 3, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (8,  4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (9,  4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (10, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (11, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (12, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (13, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (14, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (15, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (16, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (17, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (18, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (7,  4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (50, 4, 5, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (9,  4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (10, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (11, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (12, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (13, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (14, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (25, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (26, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (53, 4, 1, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (39, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (21, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (15, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (16, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (55, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (17, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (18, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (19, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (20, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (22, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (23, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (48, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (24, 4, 2, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (69, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (59, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (67, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (66, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (65, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (68, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (71, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (64, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (63, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (62, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (61, 4, 4, 1, 2, NULL, NULL)
INSERT [dbo].[VERTICES] ([id_local], [ID_BLOCO], [ID_ANDAR], [ID_STATUS], [ID_CAMPUS], [LATITUDE], [LONGITUDE]) VALUES (60, 4, 4, 1, 2, NULL, NULL)


DELETE FROM vertices


USE [faindmapdb]
GO

/****** Object:  Table [dbo].[vertices]    Script Date: 19/11/2023 09:35:06 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[vertices](
	[id_vertice] [int] IDENTITY(1,1) NOT NULL,
	[id_bloco] [int] NOT NULL,
	[id_andar] [int] NOT NULL,
	[id_local] [int] NOT NULL,
	[id_status] [int] NOT NULL,
	[id_campus] [int] NOT NULL,
	[nome] [varchar](100) NULL,
	[latitude] [float] NULL,
	[longitude] [float] NULL,
 CONSTRAINT [PK__vertices__6362C38E3D7977B8] PRIMARY KEY CLUSTERED 
(
	[id_vertice] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [vertices] ADD CONSTRAINT chaves_unicas UNIQUE ([id_andar], [id_bloco], [id_campus], [id_local]); 

ALTER TABLE [dbo].[vertices]  WITH CHECK ADD  CONSTRAINT [fk_locais_andares] FOREIGN KEY([id_andar])
REFERENCES [dbo].[andares] ([id_andar])
GO

ALTER TABLE [dbo].[vertices] CHECK CONSTRAINT [fk_locais_andares]
GO

ALTER TABLE [dbo].[vertices]  WITH CHECK ADD  CONSTRAINT [fk_locais_blocos] FOREIGN KEY([id_bloco])
REFERENCES [dbo].[blocos] ([id_bloco])
GO

ALTER TABLE [dbo].[vertices] CHECK CONSTRAINT [fk_locais_blocos]
GO

ALTER TABLE [dbo].[vertices]  WITH CHECK ADD  CONSTRAINT [fk_locais_campus] FOREIGN KEY([id_campus])
REFERENCES [dbo].[campus] ([id_campus])
GO

ALTER TABLE [dbo].[vertices] CHECK CONSTRAINT [fk_locais_campus]
GO

ALTER TABLE [dbo].[vertices]  WITH CHECK ADD  CONSTRAINT [fk_locais_sala] FOREIGN KEY([id_local])
REFERENCES [dbo].[locais] ([id_local])
GO

ALTER TABLE [dbo].[vertices] CHECK CONSTRAINT [fk_locais_sala]
GO

ALTER TABLE [dbo].[vertices]  WITH CHECK ADD  CONSTRAINT [fk_locais_status] FOREIGN KEY([id_status])
REFERENCES [dbo].[status] ([id_status])
GO

ALTER TABLE [dbo].[vertices] CHECK CONSTRAINT [fk_locais_status]
GO

